<!DOCTYPE html>
<html>
    <head>
        <title>Bird list search</title>
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="index.css">
    </head>
    <body>
        <p>Hello there.</p>

        <div id="search-widget"></div>

        <script src="https://unpkg.com/react@16.8.6/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@16.8.6/umd/react-dom.development.js" crossorigin></script>
        <script type="module">
            import {BirdSearch} from "./dist/react-components/bird-search/BirdSearch.js";
            import {observation_list} from "./dist/observation/observation-list.js"

            const birdList = observation_list();
            birdList.add_observation("Haikara", new Date());
            birdList.add_observation("Kuhankeittäjä", new Date());
            birdList.add_observation("Naakka", new Date());
            console.log(birdList.observations);

            (async()=>
            {
                const knownBirds = await fetch("birds.json")
                                         .then(response=>response.json())
                                         .catch(error=>{ /*TODO*/ });

                const searchElement = React.createElement(BirdSearch,
                {
                    birds: knownBirds.birds.map(bird=>(
                        {
                            name: bird.name,
                            imageUrl: `http://www.luontoportti.com/suomi/images/${bird.image}`,
                        })),
                });

                ReactDOM.render(searchElement, document.getElementById("search-widget"));
            })();
        </script>
    </body>
</html>
