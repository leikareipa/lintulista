<!DOCTYPE html>
<html>
    <head>
        <title>Unit test results</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="unit-tests.css">
    </head>
    <body>
        <!-- The unit tests' results will be generated as a table, here.-->

        <script src="../../client/react/react.js"></script>
        <script src="../../client/react/react-dom.js"></script>
        <script src="../../client/react/react-dom-test-utils.js"></script>
        <script type="module">
            import {BirdSearchResult} from "../../client/dist/react-components/bird-search/BirdSearchResult.js";
            import {AsyncIconButton} from "../../client/dist/react-components/buttons/AsyncIconButton.js";
            import {BirdSearchBar} from "../../client/dist/react-components/bird-search/BirdSearchBar.js";
            import {ScrollerLabel} from "../../client/dist/react-components/scroller-label/ScrollerLabel.js";
            import {BirdThumbnail} from "../../client/dist/react-components/misc/BirdThumbnail.js";
            import {Observation} from "../../client/dist/observation.js";
            import {BirdSearch} from "../../client/dist/react-components/bird-search/BirdSearch.js";
            import {Bird} from "../../client/dist/bird.js";

            const testTitle = "Lintulista - Unit tests";

            const unitTestResults =
            [
                {unitName:"Bird", passes:Bird.test()},
                {unitName:"Observation", passes:Observation.test()},
                {unitName:"ScrollerLabel", passes:ScrollerLabel.test()},
                {unitName:"BirdThumbnail", passes:BirdThumbnail.test()},
                {unitName:"AsyncIconButton", passes:AsyncIconButton.test()},
                {unitName:"BirdSearchBar", passes:BirdSearchBar.test()},
                {unitName:"BirdSearchResult", passes:BirdSearchResult.test()},
                {unitName:"BirdSearch", passes:BirdSearch.test()},
            ]

            // Output the test results into a HTML table.
            {
                const resultsTableElement = document.createElement("table");

                const header = document.createElement("th");
                header.setAttribute("colspan", "2");
                header.appendChild(document.createTextNode(testTitle));
                header.style.backgroundColor = "lightgray";
                resultsTableElement.appendChild(header);

                unitTestResults.forEach(result=>
                {
                    const newRow = document.createElement("tr");
                    newRow.className = (result.passes? "pass" : "fail");
                    
                    const unitName = document.createElement("td");
                    unitName.appendChild(document.createTextNode(result.unitName));

                    const testResult = document.createElement("td");
                    testResult.appendChild(document.createTextNode(result.passes? "passes" : "fails"));

                    newRow.appendChild(unitName);
                    newRow.appendChild(testResult)
                    resultsTableElement.appendChild(newRow);
                });

                document.body.appendChild(resultsTableElement);
                document.body.appendChild(document.createTextNode(Date()));
            }
        </script>
    </body>
</html>
