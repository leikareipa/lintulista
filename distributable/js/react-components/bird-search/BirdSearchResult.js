"use strict";import{panic_if_not_type,throw_if_not_true}from"../../assert.js";import{AsyncIconButton}from"../buttons/AsyncIconButton.js";import{BirdThumbnail}from"../misc/BirdThumbnail.js";import{Observation}from"../../observation.js";import{Bird}from"../../bird.js";export function BirdSearchResult(a={}){BirdSearchResult.validate_props(a);const b=(()=>a.userHasEditRights?a.observation?React.createElement(AsyncIconButton,{icon:"fas fa-eraser",title:`Poista ${a.bird.species} listasta`,titleWhenClicked:"Poistetaan listasta...",task:()=>a.callbackRemoveObservation(a.bird)}):React.createElement(AsyncIconButton,{icon:"fas fa-plus",title:`Lisää ${a.bird.species} listaan`,titleWhenClicked:"Lis\xE4t\xE4\xE4n listaan...",task:()=>a.callbackAddObservation(a.bird)}):React.createElement(React.Fragment,null))(),c=(()=>a.observation?a.userHasEditRights?React.createElement("span",{className:"edit-date",onClick:()=>a.callbackChangeObservationDate(a.bird)},a.observation.dateString):React.createElement(React.Fragment,null,a.observation.dateString):React.createElement(React.Fragment,null,"Ei havaintoa"))();return React.createElement("div",{className:`BirdSearchResult ${a.observation?"":"not-previously-observed"}`.trim()},React.createElement(BirdThumbnail,{bird:a.bird,useLazyLoading:!1}),React.createElement("div",{className:"card"},React.createElement("div",{className:"bird-name"},a.bird.species),React.createElement("div",{className:"date-observed"},c)),b)}BirdSearchResult.defaultProps={userHasEditRights:!1,observation:null},BirdSearchResult.validate_props=function(a){return panic_if_not_type("object",a),panic_if_not_type("boolean",a.userHasEditRights),void panic_if_not_type("function",a.callbackAddObservation,a.callbackRemoveObservation,a.callbackChangeObservationDate)},BirdSearchResult.test=()=>{let a={remove:()=>{}};try{a=document.createElement("div"),document.body.appendChild(a),ReactTestUtils.act(()=>{const b=Bird({species:"Alli",family:"",order:""}),c=Observation({bird:Bird({species:"Alli",family:"",order:""}),date:new Date(0)}),d=React.createElement(BirdSearchResult,{bird:b,observation:c,userHasEditRights:!1,callbackAddObservation:()=>{},callbackRemoveObservation:()=>{},callbackChangeObservationDate:()=>{}});ReactDOM.unmountComponentAtNode(a),ReactDOM.render(d,a)});const b=a.querySelector(".BirdSearchResult"),c=a.querySelector(".BirdThumbnail"),d=a.querySelector(".card"),e=d.querySelector(".bird-name"),f=d.querySelector(".date-observed"),g=a.querySelector(".AsyncIconButton"),h=f.querySelector(".edit-date");throw_if_not_true([()=>null!==b,()=>null!==c,()=>null===g,()=>null===h,()=>null!==d,()=>null!==e,()=>null!==f,()=>"Alli"===e.textContent,()=>"1. tammikuuta 1970"===f.textContent])}catch(a){if("assertion failure"===a)return!1;throw a}finally{a.remove()}try{a=document.createElement("div"),document.body.appendChild(a),ReactTestUtils.act(()=>{const b=Bird({species:"Alli",family:"",order:""}),c=Observation({bird:Bird({species:"Alli",family:"",order:""}),date:new Date(0)}),d=React.createElement(BirdSearchResult,{bird:b,observation:c,userHasEditRights:!0,callbackAddObservation:()=>{},callbackRemoveObservation:()=>{},callbackChangeObservationDate:()=>{}});ReactDOM.unmountComponentAtNode(a),ReactDOM.render(d,a)});const b=a.querySelector(".BirdSearchResult"),c=a.querySelector(".BirdThumbnail"),d=a.querySelector(".card"),e=d.querySelector(".bird-name"),f=d.querySelector(".date-observed"),g=a.querySelector(".AsyncIconButton"),h=f.querySelector(".edit-date");throw_if_not_true([()=>null!==b,()=>null!==c,()=>null!==g,()=>null!==d,()=>null!==h,()=>null!==e,()=>null!==f,()=>"Alli"===e.textContent,()=>"1. tammikuuta 1970"===f.textContent,()=>g.getAttribute("title").startsWith("Poista")])}catch(a){if("assertion failure"===a)return!1;throw a}finally{a.remove()}try{a=document.createElement("div"),document.body.appendChild(a),ReactTestUtils.act(()=>{const b=Bird({species:"Alli",family:"",order:""}),c=React.createElement(BirdSearchResult,{bird:b,userHasEditRights:!0,callbackAddObservation:()=>{},callbackRemoveObservation:()=>{},callbackChangeObservationDate:()=>{}});ReactDOM.unmountComponentAtNode(a),ReactDOM.render(c,a)});const b=a.querySelector(".BirdSearchResult"),c=a.querySelector(".BirdThumbnail"),d=a.querySelector(".card"),e=d.querySelector(".bird-name"),f=d.querySelector(".date-observed"),g=a.querySelector(".AsyncIconButton"),h=f.querySelector(".edit-date");throw_if_not_true([()=>null!==b,()=>null!==c,()=>null!==g,()=>null!==d,()=>null===h,()=>null!==e,()=>null!==f,()=>"Alli"===e.textContent,()=>"Ei havaintoa"===f.textContent,()=>g.getAttribute("title").startsWith("Lis\xE4\xE4")])}catch(a){if("assertion failure"===a)return!1;throw a}finally{a.remove()}try{a=document.createElement("div"),document.body.appendChild(a),ReactTestUtils.act(()=>{const b=Bird({species:"Alli",family:"",order:""}),c=React.createElement(BirdSearchResult,{bird:b,userHasEditRights:!1,callbackAddObservation:()=>{},callbackRemoveObservation:()=>{},callbackChangeObservationDate:()=>{}});ReactDOM.unmountComponentAtNode(a),ReactDOM.render(c,a)});const b=a.querySelector(".BirdSearchResult"),c=a.querySelector(".BirdThumbnail"),d=a.querySelector(".card"),e=d.querySelector(".bird-name"),f=d.querySelector(".date-observed"),g=a.querySelector(".AsyncIconButton"),h=f.querySelector(".edit-date");throw_if_not_true([()=>null!==b,()=>null!==c,()=>null!==d,()=>null===g,()=>null===h,()=>null!==e,()=>null!==f,()=>"Alli"===e.textContent,()=>"Ei havaintoa"===f.textContent])}catch(a){if("assertion failure"===a)return!1;throw a}finally{a.remove()}return!0};